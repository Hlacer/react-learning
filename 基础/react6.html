<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<div id="root"></div>
<script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
<script src="https://cdn.staticfile.org/babel-standalone/6.26.0/babel.min.js"></script>
<script type="text/babel">
    class Clock extends React.Component {
        /*constructor(props) {
            super(props);
            this.state = {date: new Date()};
        }*/
        state = {
            date:new Date()
        }
        // class 组件声明一些特殊的方法，
        // 当组件挂载或卸载时就会去执行这些方法
        //这些方法叫做"生命周期方法"

        //componentDidMount() 方法会在组件已经被渲染到 DOM 中后运行，
        // 所以，最好在这里设置计时器：
        componentDidMount() {
            this.timerID = setInterval(
                () => this.tick(),
                1000
            );
        }
        //清除计时器
        componentWillUnmount() {
            clearInterval(this.timerID);
        }

        //定义一个tick方法,clock组件每秒调用一次
        tick(){
            //使用 this.setState() 来时刻更新组件 state：
            this.setState({
                date:new Date()
            });
        }
        render() {
            return (
                <div>
                    <h1>Hello, world!</h1>
                    <h2>It is {this.state.date.toLocaleTimeString()}.</h2>      </div>
            );
        }
    }


    //当 Clock 组件第一次被渲染到 DOM 中的时候，就为其设置一个计时器。
    // 这在 React 中被称为“挂载（mount）”。
    ReactDOM.render(
        <Clock />,
        document.getElementById('root')
    );


</script>
</body>
</html>